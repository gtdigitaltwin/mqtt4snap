<project name="HelloWorld" app="Snap! 6, https://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><stage name="Escenario" width="480" height="360" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="false" hyperops="true" codify="false" inheritance="true" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAOhUlEQVR4Xu3VwQkAAAjEMN1/abewn7jAQRC64wgQIECAAIF3gX1fNEiAAAECBAiMAHsCAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQIHLFxAWmhEwHPAAAAAElFTkSuQmCC</pentrails><costumes><list struct="atomic" id="2"></list></costumes><sounds><list struct="atomic" id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Sprite" idx="1" x="100" y="-100" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="0" color="80,80,80,1" pen="tip" id="8"><costumes><list struct="atomic" id="9"></list></costumes><sounds><list struct="atomic" id="10"></list></sounds><blocks></blocks><variables></variables><scripts><script x="46" y="107.33333333333331"><block s="doSetVar"><l>broker</l><l>test.mosquitto.org:8081</l></block><custom-block s="MQTT connect %s %s %s"><block var="broker"/><l></l><l></l></custom-block></script><script x="49.33333333333334" y="185.66666666666666"><custom-block s="MQTT sub %s %s %cmdRing"><l>test.mosquitto.org:8081</l><l>joy</l><block s="reifyScript"><script><block s="setXPosition"><custom-block s="JSON %s get %s"><block var="payload"/><l>posX</l></custom-block></block><block s="setYPosition"><block s="reportMonadic"><l><option>neg</option></l><custom-block s="JSON %s get %s"><block var="payload"/><l>posY</l></custom-block></block></block></script><list><l>topic</l><l>payload</l></list></block></custom-block></script></scripts></sprite><watcher var="resp" style="normal" x="4.5625" y="4.562499999999986" color="243,118,29" hidden="true"/><watcher var="broker" style="normal" x="7.5625" y="8.143750912500025" color="243,118,29"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="load JS from url: %&apos;url&apos; waiting for object: %&apos;object&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>url</l><l>object</l></list><l>var nodes = document.getElementsByTagName(&apos;*&apos;),&#xD;    node = nodes[nodes.length - 1].parentNode,&#xD;    script = document.createElement(&apos;script&apos;);&#xD;&#xD;if (object == null) {&#xD;  throw new Error(&#xD;    &apos;You need to specify the name of an object that you expect the library to create.&apos;&#xD;  );&#xD;}&#xD;&#xD;script.id = object.replace(/[^a-z]/gi,&apos;&apos;); &#xD;&#xD;if (!document.getElementById(script.id)) {&#xD;  script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;);&#xD;  script.setAttribute(&apos;src&apos;, url);&#xD;  node.appendChild(script);&#xD;}</l></block><list><block var="url"/><block var="object"/></list></block><block s="doWaitUntil"><block s="evaluate"><block s="reportJSFunction"><list><l>objectName</l></list><l>return (typeof window[objectName]) !== &apos;undefined&apos;</l></block><list><block var="object"/></list></block></block></script></block-definition><block-definition s="MQTT connect %&apos;broker&apos; %&apos;username&apos; %&apos;password&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s"></input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>connection status</l></list></block><custom-block s="load MQTT library"></custom-block><block s="doSetVar"><l>connection status</l><l>connecting</l></block><block s="doRun"><block s="reportJSFunction"><list><l>broker</l><l>username</l><l>password</l><l>process</l></list><l>/* github.com/pixavier/mqtt4snap  */&#xD;&#xD;broker = broker ? broker.trim() : broker;&#xD;username = username ? username.trim() : username;&#xD;password = password ? password.trim() : password;&#xD;&#xD;stage =  this.parentThatIsA(StageMorph);&#xD;&#xD;if (!(&apos;mqtt&apos; in stage)){&#xD;  stage.mqtt = [];&#xD;}&#xD;&#xD;let wsbroker;&#xD;if (broker.startsWith(&apos;ws://&apos;)) {&#xD;  wsbroker = broker;&#xD;} else if (broker.startsWith(&apos;wss://&apos;)) {&#xD;  wsbroker = broker;&#xD;} else {&#xD;  let prefix;&#xD;  prefix = window.location.protocol == &apos;https:&apos;?&apos;wss&apos;:&apos;ws&apos;;&#xD;  wsbroker = prefix + &apos;://&apos; + broker;&#xD;}&#xD;&#xD;try{&#xD;  stage.mqtt[broker].end();&#xD;}catch(e){}&#xD;&#xD;delete stage.mqtt[broker];&#xD;&#xD;if (username) {&#xD;  stage.mqtt[broker] = mqtt.connect(wsbroker, {&#xD;    username: username,&#xD;    password: password,&#xD;//  reconnectPeriod: -1 &#xD;  });&#xD;}else{&#xD;  stage.mqtt[broker] = mqtt.connect(wsbroker);&#xD;}&#xD;&#xD;stage.mqtt[broker].on(&apos;connect&apos;, function(connack) {&#xD;  process.doSetVar(&apos;connection status&apos;, &apos;connected&apos;);&#xD;  console.log(&apos;Connected to &apos; + wsbroker);&#xD;});&#xD;&#xD;stage.mqtt[broker].on(&apos;close&apos;, function() {&#xD;  process.doSetVar(&apos;connection status&apos;, new Error(&apos;Connection closed&apos;));&#xD;  console.log(&apos;Connection closed on &apos; + wsbroker);&#xD;  try{ stage.mqtt[broker].end(); }catch(e){}&#xD;  delete stage.mqtt[broker];&#xD;});&#xD;&#xD;stage.mqtt[broker].on(&apos;error&apos;, function(error) {&#xD;  console.log(&apos;error&apos;, error.message);&#xD;  process.doSetVar(&apos;connection status&apos;, error);&#xD;  try{&#xD;    stage.mqtt[broker].end();&#xD;  }catch(e){}&#xD;  delete stage.mqtt[broker];&#xD;//  alert(error.message);&#xD;});&#xD;</l></block><list><block var="broker"/><block var="username"/><block var="password"/></list></block><block s="doWaitUntil"><block s="reportNot"><block s="reportEquals"><block var="connection status"/><l>connecting</l></block></block></block><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="connection status"/><l>connected</l></block></block><script><block s="doRun"><block s="reportJSFunction"><list><l>status</l></list><l>throw status;</l></block><list><block var="connection status"/></list></block></script></block></script></block-definition><block-definition s="MQTT pub %&apos;broker&apos; %&apos;topic&apos; %&apos;msg&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName</input><input type="%s">Hello</input></inputs><script><custom-block s="load MQTT library"></custom-block><block s="doRun"><block s="reportJSFunction"><list><l>broker</l><l>topic</l><l>msg</l></list><l>/* github.com/pixavier/mqtt4snap  */&#xD;&#xD;broker = broker ? broker.trim() : broker;&#xD;topic = topic ? topic.trim() : topic;&#xD;msg = msg ? msg.trim() : msg;&#xD;&#xD;let stage =  this.parentThatIsA(StageMorph);&#xD;&#xD;if (!(&apos;mqtt&apos; in stage)){&#xD;  throw new Error(&apos;No connection to broker &apos; + broker);&#xD;}&#xD;&#xD;if(!stage.mqtt[broker]){&#xD;  throw new Error(&apos;No connection to broker &apos; + broker);&#xD;}&#xD;&#xD;let prefix = window.location.protocol == &apos;https:&apos;?&apos;wss&apos;:&apos;ws&apos;;&#xD;let wsbroker = prefix+&apos;://&apos;+broker;&#xD;&#xD;try{&#xD;  let client = stage.mqtt[broker];&#xD;  client.publish(topic, &apos;&apos; + msg);&#xD;}catch(e){&#xD;//  console.log(e);&#xD;  throw e;&#xD;}&#xD;</l></block><list><block var="broker"/><block var="topic"/><block var="msg"/></list></block></script></block-definition><block-definition s="MQTT sub %&apos;broker&apos; %&apos;topic&apos; %&apos;callback&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName</input><input type="%cmdRing"></input></inputs><script><custom-block s="load MQTT library"></custom-block><block s="doRun"><block s="reportJSFunction"><list><l>broker</l><l>topic</l><l>callback</l></list><l>/* github.com/pixavier/mqtt4snap  */&#xD;&#xD;broker = broker ? broker.trim() : broker;&#xD;topic = topic ? topic.trim() : topic;&#xD;&#xD;let stage =  this.parentThatIsA(StageMorph);&#xD;&#xD;if (!(&apos;mqtt&apos; in stage)){throw new Error(&apos;No connection to broker &apos;+broker);}&#xD;&#xD;let prefix = window.location.protocol == &apos;https:&apos;?&apos;wss&apos;:&apos;ws&apos;;&#xD;let wsbroker = prefix+&apos;://&apos;+broker;&#xD;&#xD;if(stage.mqtt[broker]){&#xD;  try {stage.mqtt[broker].unsubscribe(topic);}catch(e){}&#xD;}else{&#xD;  throw new Error(&apos;No connection to broker &apos;+broker);&#xD;}&#xD;&#xD;stage.mqtt[broker].subscribe(topic);&#xD;&#xD;let mqttListener = function (aTopic, payload) {	&#xD;//  if (aTopic !== topic) { return; }&#xD;  if (!mqttWildcard(aTopic, topic)) {return;}&#xD;  let p = new Process();&#xD;  try {&#xD;    p.initializeFor(callback, new List([aTopic, payload.toString()]));&#xD;  } catch(e) {&#xD;    p.initializeFor(callback, new List([]));&#xD;  }&#xD;  stage.threads.processes.push(p);&#xD;};&#xD;&#xD;stage.mqtt[broker].on(&apos;message&apos;, mqttListener);&#xD;&#xD;let mqttWildcard = function (topic, wildcard) {&#xD; 	if (topic === wildcard) {return true;} &#xD; 	else if (wildcard === &apos;#&apos;) {return true;}&#xD;&#xD; 	var res = [];&#xD; 	var t = String(topic).split(&apos;/&apos;);&#xD; 	var w = String(wildcard).split(&apos;/&apos;);&#xD; 	var i = 0;&#xD; 	for (var lt = t.length; i &lt; lt; i++) {&#xD;		  if (w[i] === &apos;+&apos;) {&#xD; 		  	res.push(t[i]);&#xD;	  	} else if (w[i] === &apos;#&apos;) {&#xD; 	  		res.push(t.slice(i).join(&apos;/&apos;));&#xD;   			return true;&#xD;  		} else if (w[i] !== t[i]) {&#xD;   			return false;&#xD; 	  }&#xD;  }&#xD; 	if (w[i] === &apos;#&apos;) {i += 1;}&#xD; 	return (i === w.length) ? true : false;&#xD;}&#xD;</l></block><list><block var="broker"/><block var="topic"/><block var="callback"/></list></block></script></block-definition><block-definition s="MQTT unsub %&apos;broker&apos; %&apos;topic&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName</input></inputs><script><custom-block s="load MQTT library"></custom-block><block s="doRun"><block s="reportJSFunction"><list><l>broker</l><l>topic</l></list><l>/* github.com/pixavier/mqtt4snap  */&#xD;&#xD;let stage =  this.parentThatIsA(StageMorph);&#xD;try{&#xD;  stage.mqtt[broker].unsubscribe(topic);&#xD;  let listeners = stage.mqtt[broker].listeners(&apos;message&apos;);&#xD;//  https://github.com/mqttjs/async-mqtt/issues/31&#xD;//  listeners.forEach((listener) =&gt; {&#xD;//      console.dir(listener); &#xD;//      stage.mqtt[broker].removeListener(&apos;message&apos;, listener); &#xD;//    })&#xD;}catch(e){&#xD;  console.log(e);&#xD;}</l></block><list><block var="broker"/><block var="topic"/></list></block></script></block-definition><block-definition s="MQTT disconnect %&apos;broker&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input></inputs><script><custom-block s="load MQTT library"></custom-block><block s="doRun"><block s="reportJSFunction"><list><l>broker</l></list><l>/* github.com/pixavier/mqtt4snap  */&#xD;&#xD;let stage =  this.parentThatIsA(StageMorph);&#xD;&#xD;try{&#xD;  if(broker==&apos;all&apos;){&#xD;    for(let brok of Object.keys(stage.mqtt)){&#xD;      try {&#xD;        stage.mqtt[brok].end();&#xD;      } catch (e0) {&#xD;        console.log(e0);&#xD;      }&#xD;    } &#xD;  }else{&#xD;    stage.mqtt[broker].end();&#xD;  }&#xD;}catch(e1){&#xD;  console.log(e1);&#xD;}&#xD;try{&#xD;  if(broker==&apos;all&apos;){&#xD;    try {&#xD;      delete stage.mqtt;&#xD;      stage.mqtt=[];&#xD;    } catch (e2) {&#xD;      console.log(e2);&#xD;    }&#xD;  }else{&#xD;    delete stage.mqtt[broker];&#xD;  }&#xD;}catch(e3){&#xD;//  console.log(e3);&#xD;}&#xD;</l></block><list><block var="broker"/></list></block></script></block-definition><block-definition s="MQTT request %&apos;broker&apos; %&apos;topic&apos; %&apos;idCall&apos; %&apos;msg&apos; %&apos;callback&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName</input><input type="%s">idCall</input><input type="%s">Hello</input><input type="%cmdRing"></input></inputs><script><custom-block s="MQTT sub %s %s %cmdRing"><block var="broker"/><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block><block s="reifyScript"><script><block s="doRun"><block var="callback"/><list><block var="topic"/><block var="payload"/></list></block><custom-block s="MQTT unsub %s %s"><block var="broker"/><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block></custom-block></script><list><l>topic</l><l>payload</l></list></block></custom-block><custom-block s="MQTT pub %s %s %s"><block var="broker"/><block s="reportJoinWords"><list><block var="topic"/><l>/</l><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block></list></block><block var="msg"/></custom-block></script></block-definition><block-definition s="MQTT response %&apos;broker&apos; %&apos;topic&apos; %&apos;reply&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName/#</input><input type="%repRing"></input></inputs><script><block s="doDeclareVariables"><list><l>resp</l><l>callbackTopic</l></list></block><custom-block s="MQTT sub %s %s %cmdRing"><block var="broker"/><block var="topic"/><block s="reifyScript"><script><block s="doSetVar"><l>resp</l><block s="evaluate"><block var="reply"/><list><block var="topic"/><block var="payload"/></list></block></block><block s="doSetVar"><l>callbackTopic</l><block s="reportListItem"><l><option>last</option></l><block s="reportTextSplit"><block var="topic"/><l>/</l></block></block></block><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="callbackTopic"/><block var="topic"/></block></block><script><custom-block s="MQTT pub %s %s %s"><block var="broker"/><block var="callbackTopic"/><block var="resp"/></custom-block></script></block></script><list><l>topic</l><l>payload</l></list></block></custom-block></script></block-definition><block-definition s="example MQTT response reporter %&apos;topic&apos; %&apos;msg&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">topicName</input><input type="%s">msg</input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>Echo: </l><block var="msg"/></list></block></block></script></block-definition><block-definition s="MQTT request %&apos;broker&apos; %&apos;topic&apos; %&apos;idCall&apos; %&apos;msg&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">test.mosquitto.org:8081</input><input type="%s">topicName</input><input type="%s">idCall</input><input type="%s">Hello</input></inputs><script><block s="doDeclareVariables"><list><l>resp</l><l>semaphore</l></list></block><block s="doSetVar"><l>semaphore</l><l>0</l></block><custom-block s="MQTT sub %s %s %cmdRing"><block var="broker"/><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block><block s="reifyScript"><script><block s="doSetVar"><l>resp</l><block var="payload"/></block><custom-block s="MQTT unsub %s %s"><block var="broker"/><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block></custom-block><block s="doSetVar"><l>semaphore</l><l>1</l></block></script><list><l>topic</l><l>payload</l></list></block></custom-block><custom-block s="MQTT pub %s %s %s"><block var="broker"/><block s="reportJoinWords"><list><block var="topic"/><l>/</l><block s="reportJoinWords"><list><l>idCall-</l><block var="idCall"/></list></block></list></block><block var="msg"/></custom-block><block s="doWaitUntil"><block s="reportEquals"><block var="semaphore"/><l>1</l></block></block><block s="doReport"><block var="resp"/></block></script></block-definition><block-definition s="load MQTT library" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="load JS from url: %s waiting for object: %s"><l>https://unpkg.com/mqtt@4.2.5/dist/mqtt.js</l><l>mqtt</l></custom-block><block s="doWaitUntil"><block s="evaluate"><block s="reportJSFunction"><list></list><l>return (typeof mqtt.connect) !== &apos;undefined&apos;</l></block><list></list></block></block></script></block-definition><block-definition s="console log %&apos;obj&apos;" type="command" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>obj</l></list><l>console.dir(obj);</l></block><list><block var="obj"/></list></block></script></block-definition><block-definition s="JSON %&apos;json&apos; get %&apos;attr&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>json</l><l>attr</l></list><l>let jsp = JSON.parse(json);&#xD;return eval(&apos;jsp.&apos; + attr);</l></block><list><block var="json"/><block var="attr"/></list></block></block></script></block-definition></blocks><variables><variable name="resp"><l>Echo: Hello!</l></variable><variable name="broker"><l>test.mosquitto.org:8081</l></variable></variables></project>